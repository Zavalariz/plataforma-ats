<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>ATS Elite - Terminal Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body { background: #060606; color: white; font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .panel-bg { background: #0c0c0c; border: 1px solid #1a1a1a; }
        .t-input { background: #161616; border: 1px solid #222; border-radius: 4px; padding: 10px; font-size: 13px; font-weight: 700; width: 100%; color: white; }
        /* Estilo para que el gráfico ocupe todo el espacio sin bordes blancos */
        #chart-container { width: 100%; height: 100%; background: #000; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body x-data="atsEngine()" x-init="init()">

    <header class="h-14 panel-bg flex justify-between items-center px-6">
        <div class="flex items-center gap-4">
            <span class="text-[#00ffa3] font-black italic">ATS <span class="text-white">ELITE TERMINAL</span></span>
        </div>
        <div class="flex items-center gap-6">
            <div class="text-right">
                <div class="text-[9px] text-gray-500 font-bold uppercase">Balance <span x-text="accountType" class="text-[#00ffa3]"></span></div>
                <div class="text-[#00ffa3] font-bold text-xl" x-text="'$' + balance">0.00</div>
            </div>
            <button class="bg-white/5 border border-white/10 px-4 py-2 rounded text-[10px] font-bold uppercase">Sair</button>
        </div>
    </header>

    <div class="flex h-[calc(100vh-56px)] p-1 gap-1">
        
        <aside class="w-72 panel-bg p-5 flex flex-col gap-4">
            <h3 class="text-xs font-black text-gray-400 uppercase italic">Configurações da IA</h3>
            <div>
                <label class="text-[10px] text-gray-600 font-black uppercase">Mercado</label>
                <select class="t-input"><option>Volatility 100 Index</option></select>
            </div>
            <div class="grid grid-cols-3 gap-2">
                <div>
                    <label class="text-[9px] text-gray-600 font-black uppercase">Entrada</label>
                    <input type="text" x-model="stake" class="t-input text-center">
                </div>
                <div>
                    <label class="text-[9px] text-gray-600 font-black uppercase">Meta</label>
                    <input type="text" value="20" class="t-input text-center">
                </div>
                <div>
                    <label class="text-[9px] text-gray-600 font-black uppercase">Stop</label>
                    <input type="text" value="1000" class="t-input text-center">
                </div>
            </div>
            <button class="w-full bg-purple-600 py-4 rounded-xl font-black text-xs uppercase mt-auto">▶ Iniciar Robô</button>
        </aside>

        <main class="flex-1 panel-bg overflow-hidden flex flex-col">
            <div class="h-10 border-b border-white/5 flex items-center px-4 gap-4 bg-black/40">
                <span class="text-[#00ffa3] text-[10px] font-bold border-b-2 border-[#00ffa3] h-full flex items-center">Gráfico</span>
                <span class="text-gray-500 text-[10px] font-bold">Dígitos</span>
            </div>
            <div id="chart-container">
                <iframe src="https://tradingview.deriv.com/v1/index.html?symbol=1HZ100V&theme=dark&timezone=Etc%2FUTC"></iframe>
            </div>
        </main>

        <aside class="w-80 panel-bg p-5 flex flex-col gap-4">
            <h3 class="text-xs font-black text-gray-400 uppercase italic">Modo Manual</h3>
            <div class="flex flex-col gap-4">
                <button @click="trade('CALL')" class="w-full bg-[#00ffa3] text-black p-5 rounded-xl flex justify-between items-center active:scale-95 transition">
                    <span class="text-2xl font-bold">↗</span>
                    <span class="font-black uppercase italic">Rise</span>
                    <span class="text-[10px] font-bold">95%</span>
                </button>
                <button @click="trade('PUT')" class="w-full bg-[#ff3355] text-white p-5 rounded-xl flex justify-between items-center active:scale-95 transition">
                    <span class="text-2xl font-bold">↘</span>
                    <span class="font-black uppercase italic">Fall</span>
                    <span class="text-[10px] font-bold">95%</span>
                </button>
            </div>
        </aside>
    </div>

    <script>
        function atsEngine() {
            return {
                balance: '0.00',
                accountType: 'DEMO',
                stake: 10,
                socket: null,
                init() {
                    const token = new URLSearchParams(window.location.search).get('token1');
                    if (token) this.connect(token);
                },
                connect(token) {
                    this.socket = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=119907');
                    this.socket.onopen = () => this.socket.send(JSON.stringify({authorize: token}));
                    this.socket.onmessage = (msg) => {
                        const data = JSON.parse(msg.data);
                        if (data.msg_type === 'authorize') {
                            this.accountType = data.authorize.is_virtual ? 'DEMO' : 'REAL';
                            this.socket.send(JSON.stringify({balance: 1, subscribe: 1}));
                        }
                        if (data.msg_type === 'balance') {
                            this.balance = data.balance.balance.toLocaleString('en-US', {minimumFractionDigits: 2});
                        }
                    };
                },
                trade(type) {
                    alert('Ejecutando ' + type + ' con $' + this.stake);
                }
            }
        }
    </script>
</body>
</html>
