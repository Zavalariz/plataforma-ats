<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ATS Elite Terminal - Turbo Logic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body { background: #060606; color: #fff; font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .sidebar { width: 280px; background: #0c0c0c; border-right: 1px solid #1a1a1a; display: flex; flex-direction: column; }
        .main-content { flex: 1; display: flex; flex-direction: column; background: #000; }
        .right-panel { width: 300px; background: #0c0c0c; border-left: 1px solid #1a1a1a; }
        
        /* Estilo Turbo Trade Inputs */
        .t-input { background: #161616; border: 1px solid #222; border-radius: 4px; padding: 8px; font-size: 12px; font-weight: 700; width: 100%; color: #fff; }
        .t-label { font-[8px]; text-transform: uppercase; color: #666; font-weight: 800; margin-bottom: 4px; display: block; }
        
        /* Botones de Acci√≥n */
        .btn-rise { background: #00ffa3; color: #000; font-weight: 900; italic; }
        .btn-fall { background: #ff3355; color: #fff; font-weight: 900; italic; }
        iframe { border: none; width: 100%; height: 100%; }
    </style>
</head>
<body x-data="turboEngine()" x-init="init()">

    <header class="h-14 border-b border-white/5 flex justify-between items-center px-6">
        <div class="flex items-center gap-4">
            <span class="text-[#00ffa3] font-black italic">ATS ELITE</span>
            <nav class="hidden md:flex gap-4 text-[10px] font-bold text-gray-500 uppercase">
                <span class="text-white">Operar</span>
                <span>Se√±ales GPT</span>
                <span>Historial</span>
            </nav>
        </div>
        <div class="flex items-center gap-4">
            <div class="text-right">
                <div class="text-[9px] text-gray-500 font-bold uppercase">Balance <span x-text="accountType" class="text-[#00ffa3]"></span></div>
                <div class="text-[#00ffa3] font-mono text-lg font-bold" x-text="'$' + balance">0.00</div>
            </div>
            <button class="bg-white/5 px-4 py-2 rounded text-[10px] font-bold uppercase hover:bg-white/10">Sair</button>
        </div>
    </header>

    <div class="flex h-[calc(100vh-56px)]">
        
        <aside class="sidebar p-4 gap-4 overflow-y-auto">
            <div>
                <h3 class="text-[11px] font-black text-gray-400 uppercase">Configura√ß√µes da IA</h3>
                <div class="text-2xl font-black text-gray-700 mt-1">$0 (0%)</div>
            </div>

            <div>
                <label class="t-label">Mercado</label>
                <select class="t-input"><option>Volatility 100 Index</option></select>
                <p class="text-[9px] text-purple-500 mt-1 font-bold">1 tique a cada 2 segundos</p>
            </div>

            <div class="grid grid-cols-3 gap-2">
                <div>
                    <label class="t-label !text-[9px]">Entrada</label>
                    <input type="number" x-model="stake" class="t-input text-center">
                    <span class="text-[8px] text-purple-400 font-bold">0.01% saldo</span>
                </div>
                <div>
                    <label class="t-label !text-[9px]">Meta</label>
                    <input type="number" value="20" class="t-input text-center">
                    <span class="text-[8px] text-purple-400 font-bold">0.20% saldo</span>
                </div>
                <div>
                    <label class="t-label !text-[9px]">Perda</label>
                    <input type="number" value="1000" class="t-input text-center">
                    <span class="text-[8px] text-purple-400 font-bold">10.00% saldo</span>
                </div>
            </div>

            <div class="mt-auto bg-[#1a1a1a] p-3 rounded border border-white/5">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-green-500/10 rounded-full border border-green-500/20">üõ°Ô∏è</div>
                    <div>
                        <div class="text-[9px] font-black text-green-500">CONSERVADOR</div>
                        <div class="text-[10px] text-gray-400">Gerenciamento Ativo</div>
                    </div>
                </div>
            </div>

            <button class="w-full bg-purple-600 hover:bg-purple-500 py-4 rounded-xl font-black text-xs uppercase shadow-lg shadow-purple-900/20">
                ‚ñ∂ Iniciar Rob√¥
            </button>
        </aside>

        <main class="main-content">
            <div class="flex-1">
                <iframe src="https://tradingview.deriv.com/v1/index.html?symbol=1HZ100V&interval=1&theme=dark&timezone=exchange"></iframe>
            </div>
        </main>

        <aside class="right-panel p-4 flex flex-col gap-4">
            <div class="flex justify-between items-center">
                <span class="text-[11px] font-black text-gray-400 uppercase">Modo Manual</span>
                <div class="w-8 h-4 bg-white/10 rounded-full flex items-center px-1"><div class="w-2.5 h-2.5 bg-white rounded-full ml-auto"></div></div>
            </div>

            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label class="t-label">Dura√ß√£o</label>
                    <div class="flex items-center justify-between t-input">
                        <button @click="ticks > 1 && ticks--">-</button>
                        <span x-text="ticks"></span>
                        <button @click="ticks++">+</button>
                    </div>
                </div>
                <div>
                    <label class="t-label">&nbsp;</label>
                    <select class="t-input"><option>Ticks</option></select>
                </div>
            </div>

            <div class="flex flex-col gap-2 mt-4">
                <button @click="sendTrade('CALL')" class="btn-rise w-full p-4 rounded-xl flex justify-between items-center active:scale-95 transition">
                    <div class="text-left">
                        <div class="text-xl">‚Üó</div>
                        <div class="text-[10px] uppercase italic">Rise</div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px]">95% Payout</div>
                        <div class="text-[9px]" x-text="'$' + (stake * 1.95).toFixed(2)"></div>
                    </div>
                </button>

                <button @click="sendTrade('PUT')" class="btn-fall w-full p-4 rounded-xl flex justify-between items-center active:scale-95 transition">
                    <div class="text-left">
                        <div class="text-xl">‚Üò</div>
                        <div class="text-[10px] uppercase italic">Fall</div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px]">95% Payout</div>
                        <div class="text-[9px]" x-text="'$' + (stake * 1.95).toFixed(2)"></div>
                    </div>
                </button>
            </div>
        </aside>
    </div>

    <script>
        function turboEngine() {
            return {
                balance: '0.00',
                accountType: 'REAL',
                stake: 10,
                ticks: 1,
                socket: null,

                init() {
                    const urlParams = new URLSearchParams(window.location.search);
                    const token = urlParams.get('token1');
                    if (token) this.connect(token);
                },

                connect(token) {
                    this.socket = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=119907');
                    
                    this.socket.onopen = () => {
                        this.socket.send(JSON.stringify({ "authorize": token }));
                    };

                    this.socket.onmessage = (msg) => {
                        const response = JSON.parse(msg.data);
                        
                        if (response.msg_type === 'authorize') {
                            this.accountType = response.authorize.is_virtual ? 'DEMO' : 'REAL';
                            this.socket.send(JSON.stringify({ "balance": 1, "subscribe": 1 }));
                        }

                        if (response.msg_type === 'balance') {
                            this.balance = response.balance.balance.toLocaleString('en-US', { minimumFractionDigits: 2 });
                        }
                    };
                },

                sendTrade(type) {
                    const proposal = {
                        "buy": 1,
                        "price": parseFloat(this.stake),
                        "parameters": {
                            "amount": parseFloat(this.stake),
                            "basis": "stake",
                            "contract_type": type,
                            "currency": "USD",
                            "duration": parseInt(this.ticks),
                            "duration_unit": "t",
                            "symbol": "R_100"
                        }
                    };
                    this.socket.send(JSON.stringify(proposal));
                }
            }
        }
    </script>
</body>
</html>
